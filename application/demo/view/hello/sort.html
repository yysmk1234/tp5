<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>排序</title>
    <link href="../../../../public/static/dist/css/bootstrap.css" rel="stylesheet">
    <link href="../../../../public/static/layer/skin/default/layer.css">
    <script src="../../../../public/static/dist/js/jquery.min.js"></script>
    <script src="../../../../public/static/dist/js/bootstrap.js"></script>
    <script src="../../../../public/static/layer/layer.js"></script>
    <script src="../../../../public/static/layer/layer_m.js"></script>
    <script src="../../../../public/static/cookie/jquery.cookie.js"></script>
</head>
<body>
    <div class="container" style="margin-top: 50px;padding-top: 40px">
        <label style="margin-top: 20px">组名:{$group_n}</label>
        <br />

        <button class="btn btn-info add">添加数据</button>
        <table class="table table-condensed" style="margin-top: 20px">
            <tr>
                <td>emoi</td>
                <td>scl</td>
                <td>High alpha</td>
                <td>gamma</td>
                <td>tag</td>
            </tr>
            {if condition= "count($data)==0"}
            <tr><td style="border: none ;width: 200px">暂时没有数据</td></tr>
            {else /}
            {volist name="data" id="data"}
            <tr>
                <td>{$data.emoi}</td>
                <td>{$data.scl}</td>
                <td>{$data.High_alpha}</td>
                <td>{$data.gamma}</td>
                <td>{$data.tag}</td>
            </tr>
            {/volist}
            {/if}
        </table>
    </div>

    <div class="container show_data" style="border: 1px solid #333;display: none;border-radius: 10px">

        <form>
            <label>选择筛选条件</label>
            <br />
            <label style="padding-top: 20px">请选择性别：</label>
            <select name="sex">
                {volist name = "sex" id="sex" }
                <option value="{$sex.id}">{$sex.value}</option>
                {/volist}
            </select>
            <br />

            <label style="padding-top: 20px">请选择年龄：</label>
            <select name="age_group">
                {volist name = "age_group" id="age" }
                <option value="{$age.id}">{$age.value}</option>
                {/volist}
            </select>
            <br />

            <label style="padding-top: 20px">请选择游戏经历：</label>
            <select name="game_experience">
                {volist name = "game_experience" id="exp" }
                <option value="{$exp.id}">{$exp.value}</option>
                {/volist}
            </select>
            <br />

            <label style="padding-top: 20px">请选择游戏年限：</label>
            <select name="game_year">
                {volist name = "game_year" id="year" }
                <option value="{$year.id}">{$year.value}</option>
                {/volist}
            </select>
            <br />

            <label style="padding-top: 20px;padding-bottom: 20px">请选择测试顺序：</label>
            <select name="status">
                {volist name = "status" id="statu" }
                <option value="{$statu.status_}">{$statu.status_}</option>
                {/volist}
            </select>
            <br />



            <button class="btn btn-info choose" type="button">筛选</button>
            <button class="btn btn-info add_data" type="button">添加</button>
        </form>
        <table class="table table-condensed" style="margin-top: 20px" id="c_data">
            <tr>
                <td>#</td>
                <td>emoi</td>
                <td>scl</td>
                <td>High alpha</td>
                <td>gamma</td>
                <td>tag</td>
            </tr>

        </table>
    </div>

</body>
<script>
    (function () {
        $('.btn-info,.add').click(function () {
            $('.show_data').show();
        });
        $('.choose').click(function () {
            var data = $('form').serialize();
            $('#c_data').empty();
            var df_str ="<tr>"+
                "<td>"+"#"+"</td>"+
                "<td>"+"emoi"+"</td>"+
                "<td>"+"scl"+"</td>"+
                "<td>"+"High alpha"+"</td>"+
                "<td>"+"gamma"+"</td>"+
                "<td>"+"tag"+"</td>"+
                "</tr>" ;
            $('#c_data').append(df_str);
            $.ajax({
                url:"{:url('demo/hello/sortdata')}",
                type:"POST",
                data:data,
                dataType:"json",
                success:function (data) {
//                    console.log(data);
                    for(var x in data){
                        console.log(data[x]);
                        var str = "<tr>"+
                            "<td>"+"<input type='checkbox' name='test_id' value="+data[x].id+">"+"</td>"+
                            "<td>"+data[x].emoi+"</td>"+
                            "<td>"+data[x].scl+"</td>"+
                            "<td>"+data[x].High_alpha+"</td>"+
                            "<td>"+data[x].gamma+"</td>"+
                            "<td>"+data[x].tag+"</td>"+
                            "</tr>";
                    $('#c_data').append(str);
                    }
                }
            });
        });
        $('.add_data').click(function () {
            var arr_data = [];
            var i = 0;
            $('#c_data').find("input[type='checkbox']:checked").each(function () {
                var test_id = $(this).val();
                arr_data['name'+i] = test_id;
//                console.log(test_id);
                i++;
//               alert($.cookie("group_name"));
            });
            console.log(arr_data);
//            var re_data = JSON.stringify(arr_data);
            $.ajax({
                url:"{:url('demo/hello/adddata')}",
                type:"POST",
                data: arr_data,
//                dataType:"json",
                success:function (data) {
                    console.log(data);
                }
            });
//            alert(arr_data);
//            alert(data);
        });
    })()
</script>
</html>